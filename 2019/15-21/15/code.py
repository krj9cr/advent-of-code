from lib.intcode import Intcode
from lib.search import bfs_2d_map

import plotly.graph_objects as go
import random

###########################
# helpers
###########################
def parseInputFile():
    with open((__file__.rstrip("code.py") + "input.txt"), 'r') as file:
        return [ int(num) for num in [ line.split(",") for line in file ][0] ]

def parseInput(lines):
    return [ int(line) for line in str(lines).split(",") ]

def parseLine(line: str):
    return line.strip()

empty = "."
wall = "#"
oxygen = "O"
possible_inputs = [1, 2, 3, 4]

def drawMap(map):
    wallsx = []
    wallsy = []
    emptyx = []
    emptyy = []
    oxygenx = []
    oxygeny = []
    fig = go.Figure()
    for coord in map:
        if map[coord] == wall:
            wallsx.append(coord[0])
            wallsy.append(coord[1])
        elif map[coord] == oxygen:
            oxygenx.append(coord[0])
            oxygeny.append(coord[1])
        else:
            emptyx.append(coord[0])
            emptyy.append(coord[1])

    fig.add_trace(go.Scatter(x=emptyx, y=emptyy, mode='markers',
         marker=dict(
             color='Green',
             size=10
         )))
    fig.add_trace(go.Scatter(x=wallsx, y=wallsy, mode='markers',
        marker=dict(
            color='Black',
            size=10
        )))
    fig.add_trace(go.Scatter(x=oxygenx, y=oxygeny, mode='markers',
         marker=dict(
             color='Blue',
             size=10
         )))
    fig.show()

def nextLoc(loc, dir):
    if dir == 1: # north
        return loc[0], loc[1]-1
    elif dir == 2: # south
        return loc[0], loc[1]+1
    elif dir == 3: # west
        return loc[0]-1, loc[1]
    elif dir == 4: # east
        return loc[0]+1, loc[1]
    else:
        print("BAD DIR:",dir)
        exit(1)

def chooseNextInput(map, currloc):
    for i in possible_inputs:
        possible_next_loc = nextLoc(currloc, i)
        if map.get(possible_next_loc) is None:
            return i
    random.shuffle(possible_inputs)
    return possible_inputs[0]

###########################
# part1
###########################
def part1(data):
    print(data)
    random.seed(1)
    loc = (0,0)
    oxygenloc = None
    map = {loc: empty}
    searched = {loc: []}
    steps = 0
    intcode_input = [1]

    intcoder = Intcode(data, intcode_input, debug=False)
    while intcoder.running:
        # check for outputs
        if len(intcoder.output) >= 1:
            # print("output",intcoder.output)
            # read the output
            output = intcoder.output[0]
            nextSpace = nextLoc(loc, intcode_input[-1])
            # store informations
            if output == 0: # wall
                map[nextSpace] = wall
            elif output == 2: # found oxygen
                map[nextSpace] = oxygen
                oxygenloc = (loc[0], loc[1])
                loc = (nextSpace[0], nextSpace[1])
            else: # empty
                map[nextSpace] = empty
                loc = (nextSpace[0], nextSpace[1])
            # decide what next input should be
            # for now, RANDOM
            # random.shuffle(possible_inputs)
            intcode_input.append(chooseNextInput(map, loc))
            intcoder.output = []
        intcoder.step()
        steps += 1
        # decide when to stop
        if steps > 13000000:
            break
    drawMap(map)
    print(map)
    path = bfs_2d_map(map, (0,0), oxygenloc, exclude=wall)
    print("path",path)
    print("answer",len(path))


def runpart1():
    part1(parseInputFile())

###########################
# part2
###########################
def isFull(map):
    for coord in map:
        if map[coord] == ".":
            return False
    return True

def part2():
    # copied full map from part1 result
    map = {(17, -1): '#', (13, -17): '#', (-8, -4): '.', (-15, -2): '.', (7, -4): '#', (-20, 17): '.', (13, 16): '.', (-7, 15): '#', (17, -6): '.', (-9, -2): '.', (-5, 1): '#', (2, -14): '.', (18, 16): '.', (-18, 11): '#', (3, -11): '#', (-14, -3): '#', (0, -16): '.', (-7, -19): '#', (13, -13): '#', (3, 3): '#', (1, -21): '#', (14, -10): '.', (-3, -4): '#', (-11, 15): '#', (3, 6): '#', (11, 7): '#', (-19, -6): '.', (11, -11): '#', (-9, 9): '#', (11, 0): '.', (17, 13): '#', (-20, -10): '.', (14, 16): '.', (7, -18): '.', (17, -13): '#', (4, 1): '.', (12, 0): '.', (-18, 1): '.', (5, -8): '#', (10, -4): '.', (-1, 3): '#', (8, 18): '.', (10, 16): '.', (-11, -15): '#', (3, -6): '#', (14, 8): '.', (0, -9): '.', (13, -20): '#', (12, -16): '.', (-13, -13): '#', (1, -20): '.', (-16, -1): '#', (14, -7): '.', (7, -15): '#', (-3, -11): '#', (-11, 8): '#', (-13, -5): '#', (-3, -10): '#', (-17, 4): '.', (-9, 5): '#', (-1, -16): '#', (5, 1): '#', (-9, 6): '#', (17, 6): '.', (-7, -15): '#', (-16, -10): '.', (-20, -19): '#', (-20, 7): '.', (4, -4): '.', (17, -12): '#', (6, -16): '.', (6, 11): '.', (-8, 2): '.', (-11, -6): '#', (11, -18): '#', (3, -17): '#', (-14, -17): '#', (-10, -17): '.', (-9, -1): '#', (-13, -8): '#', (13, -2): '.', (-16, -11): '#', (-7, -20): '#', (-11, 17): '#', (15, -17): '#', (-2, -5): '.', (11, -15): '#', (5, 10): '.', (18, -16): '.', (-1, 14): '.', (4, 17): '.', (-1, -6): '#', (2, 4): '.', (7, 4): '#', (10, 7): '.', (18, 6): '.', (-15, 13): '#', (-4, 10): '.', (17, -19): '#', (19, 1): '#', (-15, 16): '.', (-8, 9): '.', (3, -2): '#', (5, 9): '#', (17, -9): '#', (-6, 3): '.', (19, -9): '#', (4, -11): '.', (18, -10): '.', (-3, 11): '#', (1, -1): '#', (-16, -20): '.', (-12, -20): '.', (15, -12): '.', (6, -17): '#', (6, 6): '.', (12, -7): '.', (14, 1): '#', (10, -20): '.', (-16, 0): '.', (-10, 11): '.', (-1, 16): '.', (16, 11): '#', (-6, -18): '.', (19, 6): '#', (-9, -13): '#', (-21, 8): '#', (-13, 13): '#', (18, -5): '.', (18, 17): '#', (-7, -7): '#', (15, 4): '#', (-21, -6): '#', (19, -20): '#', (8, 7): '#', (-6, 10): '.', (16, -7): '.', (-10, -7): '#', (-4, 4): '.', (1, -9): '#', (0, 19): '#', (10, 10): '.', (-12, -21): '#', (-12, 14): '.', (-15, -8): '.', (-15, 3): '#', (-12, 8): '.', (-14, 10): '.', (4, 7): '.', (-10, 2): '.', (17, -20): '.', (9, -19): '#', (16, 2): '.', (8, -12): '.', (19, 15): '#', (-21, 1): '#', (-3, 0): '#', (-18, 14): '.', (-18, -12): '.', (-8, -21): '#', (17, 16): '.', (-18, -17): '#', (19, -11): '#', (8, 14): '.', (-7, -5): '#', (16, -16): '.', (14, 12): '.', (7, 16): '#', (8, -20): '.', (-10, -16): '.', (-4, 3): '#', (-8, 10): '.', (-4, -3): '.', (12, 4): '.', (-9, -17): '#', (10, -16): '.', (-12, -14): '.', (15, 15): '#', (15, -6): '#', (-1, -20): '#', (12, -17): '#', (0, -17): '.', (1, 13): '#', (15, 9): '#', (-4, -10): '.', (-10, 5): '.', (7, -11): '#', (-3, -19): '#', (13, 9): '#', (6, 12): '.', (8, -5): '#', (9, -9): '#', (-21, 6): '#', (18, -19): '.', (18, 3): '.', (-8, -14): '.', (19, -6): '#', (16, -9): '.', (0, 2): '.', (14, -3): '#', (-6, 0): '.', (-6, -20): '.', (-12, -7): '.', (-2, 0): '.', (-3, -15): '#', (-19, -13): '#', (1, 3): '#', (1, 6): '.', (13, -3): '#', (-17, -13): '#', (0, 14): '.', (5, -13): '#', (-4, 11): '#', (12, 3): '#', (6, 7): '#', (4, 8): '.', (5, 18): '#', (-18, 8): '.', (-8, -7): '.', (-2, 10): '.', (-2, -12): '.', (16, -18): '.', (-20, -4): '.', (4, -10): '.', (-7, 10): '.', (-4, 17): '#', (-15, -20): '.', (-9, -3): '#', (5, -14): '#', (-7, 16): '#', (11, -21): '#', (2, -9): '#', (-17, 13): '#', (9, -4): '#', (-11, -21): '#', (3, -16): '#', (5, 8): '#', (-14, -1): '.', (0, -3): '.', (-11, -20): '.', (-19, 13): '#', (13, -10): '#', (3, -15): '#', (10, -21): '#', (14, -13): '#', (3, 1): '#', (-11, 2): '#', (-6, -2): '.', (16, -2): '.', (-9, 12): '.', (0, -4): '.', (17, 8): '.', (-20, -5): '.', (-20, 13): '.', (7, -19): '#', (-17, 0): '#', (9, 7): '#', (-18, 5): '.', (-9, -9): '#', (13, -9): '#', (-5, 6): '.', (-9, -6): '.', (-5, 5): '#', (15, -9): '#', (11, 10): '.', (3, -7): '#', (-14, -7): '.', (0, -12): '.', (-18, -2): '.', (-13, 17): '#', (17, 0): '#', (-13, -18): '#', (1, -17): '#', (-16, -5): '#', (14, -6): '.', (-18, -3): '#', (-3, -8): '.', (-11, 11): '#', (6, 1): '#', (-1, -19): '#', (14, -1): '.', (-5, -6): '.', (14, -14): '.', (-14, 15): '.', (-7, -17): '#', (2, -5): '#', (17, 1): '#', (7, 18): '.', (-20, -14): '.', (-20, 4): '.', (-17, 9): '#', (-19, 2): '#', (11, -3): '#', (-3, 4): '#', (9, 13): '#', (9, 19): '#', (10, 6): '.', (-11, -3): '#', (3, -1): '#', (-14, -12): '.', (11, -1): '#', (-14, -16): '.', (-16, 7): '.', (-13, -9): '#', (12, 8): '.', (-16, -14): '.', (-14, 1): '#', (10, -12): '.', (3, 15): '#', (2, 8): '.', (18, 9): '#', (5, 13): '#', (-9, 2): '#', (5, -19): '#', (-15, -13): '#', (-4, -18): '.', (-13, 2): '.', (-7, -11): '#', (7, -7): '#', (-5, -2): '.', (-20, 3): '.', (13, 13): '#', (16, 17): '.', (-20, -17): '.', (9, -13): '#', (19, -10): '#', (-8, 6): '.', (-2, -18): '.', (-5, 19): '#', (-6, 4): '.', (-16, -2): '.', (-14, -21): '#', (-14, 5): '.', (6, -8): '.', (6, 19): '#', (-13, -4): '#', (1, -7): '#', (3, 11): '#', (15, -21): '#', (2, 3): '#', (12, -2): '.', (1, 15): '#', (-17, -9): '#', (-5, 9): '#', (-7, -2): '.', (16, 8): '.', (19, 5): '#', (4, 12): '.', (-8, 13): '#', (18, -4): '.', (-18, -18): '.', (10, -5): '.', (-1, 6): '.', (8, 4): '.', (-6, 15): '.', (18, 14): '.', (3, -20): '.', (-10, -6): '.', (4, -15): '#', (-2, 4): '.', (1, -14): '#', (0, 16): '.', (7, -14): '.', (12, 16): '.', (-2, 19): '#', (12, 2): '.', (-15, -5): '#', (-15, 14): '#', (9, -8): '.', (12, -11): '.', (-3, -17): '#', (9, -18): '.', (4, 4): '.', (19, -1): '#', (16, 15): '#', (8, -15): '.', (6, -9): '.', (19, 10): '#', (6, 14): '.', (-21, 12): '#', (16, -6): '.', (18, -9): '.', (18, 13): '.', (-16, 8): '.', (-2, 9): '#', (-21, -1): '#', (19, -16): '#', (8, 11): '.', (16, -3): '.', (-19, -20): '.', (-10, -3): '#', (-4, 0): '.', (5, 4): '.', (-17, -8): '#', (-13, 5): '#', (2, 12): '.', (15, -15): '#', (12, 15): '#', (-15, -4): '.', (15, -7): '#', (15, -20): '.', (12, -20): '.', (0, -20): '.', (-18, 19): '#', (1, 8): '#', (-10, 18): '.', (-1, 13): '#', (4, 3): '#', (-10, 6): '.', (-10, -1): '.', (-18, -7): '#', (-12, 6): '.', (16, 6): '.', (-6, -11): '#', (18, -8): '.', (-19, -19): '#', (14, -18): '.', (18, 4): '.', (-8, -17): '#', (-21, -9): '#', (19, -7): '#', (-17, 10): '.', (-6, 17): '#', (16, -12): '.', (11, 11): '#', (-10, -12): '.', (11, -7): '#', (3, -10): '#', (11, 3): '#', (-9, -21): '#', (-12, -1): '.', (6, 0): '.', (-15, -11): '#', (2, 16): '.', (-6, -7): '#', (-12, 19): '#', (14, 4): '.', (2, -15): '.', (-16, 19): '#', (0, -13): '.', (4, 10): '.', (-2, -6): '.', (12, 12): '.', (-19, -2): '.', (-1, -2): '#', (-6, -4): '.', (1, 17): '#', (13, -16): '#', (-7, -1): '#', (-21, -20): '#', (19, -2): '#', (17, 18): '.', (15, -4): '.', (16, -21): '#', (7, -3): '#', (-5, -18): '.', (-13, -17): '#', (-7, 5): '#', (4, -18): '.', (-5, 11): '#', (2, -8): '.', (-15, -18): '.', (0, 10): '.', (18, 8): '.', (-16, 10): '.', (3, -13): '#', (-13, 7): '#', (7, 11): '#', (-10, 16): '.', (-14, 16): '.', (-11, 5): '#', (3, 7): '#', (11, 4): '.', (-19, -5): '#', (11, -14): '#', (10, 14): '.', (-3, -21): '#', (-8, -3): '#', (-14, 6): '.', (17, 11): '#', (5, -2): '.', (-20, -8): '.', (-20, 18): '.', (-7, 14): '#', (-17, 7): '#', (11, 15): '#', (5, -4): '.', (-4, -8): '.', (-9, -7): '#', (5, -1): '#', (-1, 2): '.', (-1, 15): '#', (10, 19): '#', (18, 18): '.', (-3, 10): '.', (-14, -6): '.', (0, -15): '#', (1, 19): '#', (-13, 12): '#', (-15, -12): '.', (-13, -19): '#', (-16, -8): '.', (14, -9): '.', (7, -10): '.', (-3, -5): '#', (-11, 14): '#', (13, 6): '.', (-17, 5): '#', (8, -19): '#', (9, -12): '.', (-5, -7): '#', (-9, 8): '.', (4, -21): '#', (-17, -14): '#', (7, 17): '#', (0, 5): '#', (-20, -9): '.', (6, -1): '#', (-20, 9): '#', (17, -14): '#', (6, -13): '.', (6, 10): '.', (-9, -10): '.', (8, 19): '#', (19, 14): '#', (-11, -16): '#', (-3, 3): '#', (-3, 18): '.', (14, 9): '#', (17, 2): '#', (-13, -14): '.', (5, -16): '.', (0, 15): '#', (-14, 2): '.', (3, 10): '#', (-15, 17): '#', (2, 13): '.', (4, 11): '#', (-5, -1): '#', (-9, 1): '#', (18, -13): '.', (2, -11): '.', (-1, -5): '#', (-7, -16): '#', (-13, 18): '.', (-20, -18): '.', (-20, 0): '.', (-4, 9): '#', (17, -21): '#', (5, 5): '#', (-8, 3): '.', (-5, -12): '#', (17, -16): '.', (-11, -7): '#', (-14, -20): '.', (-10, -20): '.', (3, -14): '.', (-18, 18): '.', (0, 6): '.', (13, 17): '#', (-11, 16): '.', (15, -18): '#', (6, -18): '.', (-2, -8): '.', (-14, -4): '.', (-5, -9): '#', (4, 18): '.', (7, 7): '#', (2, -17): '#', (-17, 18): '.', (-19, -1): '#', (9, 14): '.', (-21, 18): '#', (-13, 10): '#', (-18, -21): '#', (-7, -6): '#', (15, 5): '#', (-1, -17): '#', (8, 1): '#', (15, -16): '#', (3, -21): '#', (15, 3): '#', (-1, 12): '.', (-14, 17): '#', (-4, 14): '.', (-2, -11): '.', (1, -3): '#', (-16, -19): '#', (10, 13): '#', (-12, -19): '.', (-12, 13): '.', (14, 2): '.', (-15, 9): '#', (-12, 2): '.', (-14, 13): '.', (10, 15): '#', (-10, 8): '.', (-17, 19): '#', (-9, 16): '#', (16, 12): '.', (-6, -17): '#', (-11, -1): '#', (-19, -9): '#', (-21, 11): '#', (-8, 17): '#', (-18, 4): '.', (-18, -14): '.', (-9, -18): '.', (17, 17): '#', (-19, 17): '#', (8, 8): '.', (-6, 11): '#', (-18, -9): '#', (9, -5): '#', (14, 15): '.', (-10, -2): '.', (-4, 5): '.', (7, 8): '.', (-4, -4): '.', (1, -10): '.', (12, 11): '#', (9, 9): '#', (-10, 15): '#', (-12, -12): '.', (2, -21): '#', (15, 1): '#', (-15, 2): '.', (-12, 9): '.', (-19, 14): '#', (1, 11): '#', (15, 14): '.', (4, 0): '.', (-10, 3): '.', (7, -6): '#', (-1, -11): '#', (13, 10): '#', (16, 3): '.', (-6, -10): '.', (8, -11): '.', (9, -16): '.', (-19, -16): '#', (-21, 0): '#', (-18, 15): '.', (-2, -19): '.', (-18, -11): '#', (-8, -20): '.', (-21, -14): '#', (-19, 10): '.', (8, 15): '.', (-6, 18): '.', (16, -15): '#', (0, 1): '#', (8, 0): '.', (-18, 0): '.', (14, -4): '.', (-10, -15): '#', (9, 16): '#', (-12, -13): '#', (-3, -14): '#', (-15, -16): '#', (-19, -12): '#', (2, 17): '.', (-12, 16): '.', (-16, 16): '.', (1, 12): '.', (-17, -16): '#', (4, 15): '#', (0, -2): '.', (-5, 10): '.', (-3, -20): '.', (-6, -15): '.', (0, 11): '#', (-4, -9): '.', (-18, -4): '.', (-8, -13): '#', (-1, 5): '#', (-19, 3): '#', (2, 11): '.', (-18, -15): '.', (-4, 13): '.', (-7, 0): '#', (15, 19): '#', (9, 2): '#', (7, -17): '#', (-5, -16): '.', (-2, 1): '#', (-17, 2): '#', (-9, 3): '#', (1, -2): '#', (3, 18): '#', (11, -10): '#', (11, 19): '#', (1, 5): '#', (13, -4): '#', (6, 4): '.', (-15, 6): '.', (-20, 8): '.', (6, 13): '#', (5, 17): '#', (8, -4): '.', (-16, 11): '.', (16, -17): '.', (-20, -3): '.', (11, -2): '#', (-7, 9): '#', (-4, 18): '.', (-13, 6): '#', (5, -7): '#', (-9, -4): '.', (-5, 15): '#', (-2, 8): '.', (-15, 10): '#', (-3, 13): '#', (-21, -13): '#', (0, -1): '.', (-13, 11): '#', (-14, 12): '.', (18, 0): '.', (-3, -1): '#', (-12, 1): '#', (4, -8): '.', (-9, 15): '#', (-6, -1): '.', (2, 18): '.', (-17, -15): '#', (14, -5): '.', (-20, -12): '.', (-2, 15): '#', (-20, 14): '.', (-7, 18): '.', (-11, -14): '.', (2, -4): '.', (11, -6): '#', (3, -5): '#', (-9, -11): '#', (-5, 4): '.', (8, 16): '.', (-1, -12): '#', (-11, -13): '#', (-3, 6): '.', (-14, -9): '#', (-14, -10): '.', (-16, 5): '#', (-16, 6): '.', (-13, 16): '#', (-13, -15): '#', (1, -18): '.', (-12, -9): '#', (0, 12): '.', (-14, 7): '#', (10, -9): '.', (3, 9): '#', (-11, 10): '#', (-1, -14): '.', (-5, -3): '#', (-9, 4): '#', (5, -18): '#', (15, 2): '#', (-17, -1): '#', (-15, 7): '#', (7, -2): '#', (-20, -13): '.', (-20, 5): '#', (-13, -16): '.', (-17, 8): '#', (-18, -10): '.', (7, 9): '#', (-8, 0): '.', (-9, -14): '.', (-8, -1): '#', (0, 13): '#', (-11, -4): '#', (-14, -15): '.', (-14, 4): '.', (6, -5): '#', (10, 4): '.', (6, 18): '.', (-13, -10): '.', (-16, -13): '.', (3, 14): '#', (-11, 19): '#', (11, 13): '#', (-15, 19): '#', (-19, -8): '.', (2, 9): '#', (11, -9): '#', (-11, -18): '#', (17, 10): '.', (-4, -17): '#', (-7, -12): '.', (16, 18): '.', (-17, 17): '#', (-8, 16): '.', (-4, -5): '#', (-8, 7): '#', (-12, -6): '.', (-18, 7): '.', (-5, 18): '.', (10, -6): '.', (2, -3): '.', (14, -11): '#', (-2, -2): '.', (2, 15): '#', (-6, 5): '#', (-18, -19): '#', (13, 1): '#', (1, -8): '#', (7, -13): '#', (-5, -4): '#', (13, 3): '#', (-17, 6): '#', (9, -7): '#', (-2, -4): '.', (-12, 7): '.', (-19, 18): '.', (-7, -3): '#', (16, 9): '#', (6, -10): '.', (19, 4): '#', (6, 9): '#', (-8, 14): '.', (18, -3): '#', (8, -8): '.', (18, 19): '#', (-20, -1): '.', (-21, -8): '#', (8, 5): '.', (-6, 12): '.', (2, -18): '.', (-3, 17): '#', (-10, -5): '.', (4, -14): '.', (17, 7): '#', (1, -15): '#', (5, -3): '#', (0, 17): '#', (7, 12): '#', (12, 17): '.', (2, -20): '.', (-15, -6): '#', (15, -13): '#', (9, 6): '#', (12, -10): '.', (-5, -20): '.', (-9, 19): '#', (18, -18): 'O', (2, -16): '.', (4, 5): '#', (-10, 12): '.', (2, 2): '.', (10, 5): '#', (-18, -8): '.', (-12, 5): '#', (16, 0): '.', (-6, -21): '#', (8, -14): '.', (7, -1): '#', (19, 13): '#', (-21, 15): '#', (18, -12): '.', (18, 10): '.', (9, 3): '#', (-21, -15): '#', (19, -13): '#', (17, -11): '#', (6, -21): '#', (16, -1): '#', (-21, -16): '#', (11, 8): '#', (-10, -14): '.', (-4, 1): '.', (-3, 9): '#', (-9, -19): '#', (-12, -16): '.', (2, 0): '.', (15, 13): '#', (15, -8): '#', (6, -19): '.', (-1, -18): '#', (12, -19): '.', (-14, -5): '.', (0, -19): '#', (0, -14): '.', (-4, -12): '.', (-10, 7): '#', (12, 19): '#', (-2, 14): '.', (3, 17): '#', (16, 7): '#', (-6, -14): '.', (8, -7): '.', (-1, -9): '#', (19, 18): '#', (-21, 4): '#', (9, 0): '.', (13, -15): '#', (18, -17): '#', (18, 5): '.', (-8, -16): '.', (15, 6): '#', (-21, -10): '#', (19, -8): '#', (15, -3): '#', (16, -11): '#', (-5, -17): '#', (10, 1): '#', (13, 18): '#', (-7, 3): '#', (-10, -11): '#', (10, 8): '.', (12, 7): '#', (-2, 2): '.', (15, 10): '.', (-8, -6): '.', (0, 9): '.', (14, -12): '.', (1, 0): '#', (-13, 1): '#', (-4, -13): '.', (13, -11): '#', (7, 3): '#', (-3, -6): '.', (-6, -3): '#', (11, 5): '#', (19, 2): '#', (11, -13): '#', (-8, -9): '#', (-21, -17): '#', (-17, -17): '#', (16, -20): '.', (15, 0): '.', (-7, 4): '#', (4, -17): '.', (-12, -2): '.', (5, -12): '#', (10, -2): '.', (2, -7): '.', (-15, -19): '#', (-10, -18): '.', (-11, -19): '#', (0, -5): '#', (13, -8): '#', (15, 11): '#', (10, -19): '.', (14, -19): '#', (7, -9): '#', (5, 6): '.', (-11, 4): '#', (-13, -7): '#', (9, -11): '#', (-8, -2): '.', (12, -6): '.', (12, -21): '#', (-17, -12): '.', (0, 4): '.', (-20, -7): '#', (-20, 19): '#', (-7, 13): '#', (17, -8): '#', (6, -14): '.', (-9, -8): '#', (-5, 3): '#', (-2, 12): '.', (17, -10): '#', (-19, -15): '#', (-11, -10): '.', (11, -20): '.', (3, -19): '#', (14, 7): '#', (-16, 2): '.', (1, 1): '#', (1, 18): '.', (-13, 15): '#', (-17, -3): '#', (-13, -20): '#', (19, -12): '#', (5, -15): '#', (-16, -7): '.', (-14, 8): '.', (3, 4): '.', (-11, 13): '#', (8, -18): '.', (-4, -14): '.', (-5, -8): '#', (-9, 11): '#', (18, -14): '.', (-1, 8): '.', (17, 3): '#', (-7, -18): '.', (-20, -16): '.', (-20, 10): '.', (4, -16): '.', (17, -15): '#', (-5, -13): '#', (-9, -15): '#', (-5, -11): '#', (15, -2): '#', (-17, 15): '#', (11, 1): '#', (-3, 2): '.', (14, 14): '.', (-19, 11): '#', (13, 11): '#', (0, 0): '.', (-14, 3): '#', (3, 13): '#', (-2, -10): '.', (14, 3): '.', (-5, -15): '#', (-9, 0): '#', (-16, 14): '.', (-4, -20): '.', (2, -6): '.', (17, 4): '#', (-7, -9): '#', (-19, 0): '#', (-1, 18): '.', (-20, 1): '.', (9, 15): '#', (-8, 4): '.', (-5, 17): '#', (-6, 6): '.', (-11, -8): '.', (-5, -21): '#', (14, 17): '#', (12, 6): '.', (10, 17): '#', (-13, -6): '#', (1, -5): '#', (-16, -9): '.', (10, 12): '.', (-14, -19): '.', (12, -12): '.', (4, -5): '.', (2, -2): '.', (-8, -10): '.', (-2, -7): '#', (12, -4): '.', (-5, -10): '.', (14, -16): '.', (4, 19): '#', (17, -18): '#', (-7, -8): '.', (9, -17): '#', (10, 0): '.', (3, 0): '#', (-19, -3): '#', (-11, 1): '#', (3, -4): '.', (-8, 11): '#', (18, -2): '.', (9, 17): '#', (-17, -20): '.', (8, 2): '.', (-6, 1): '#', (-14, -14): '.', (-4, 15): '#', (1, -4): '#', (12, 10): '.', (-16, -18): '.', (10, -14): '.', (-3, -2): '.', (-12, -18): '.', (7, 15): '#', (15, -10): '.', (12, -5): '.', (-15, -15): '#', (-10, 9): '.', (-15, 4): '#', (-13, -11): '#', (16, 13): '#', (6, 16): '.', (9, -15): '#', (19, 8): '#', (-21, 10): '#', (-8, 18): '.', (18, -7): '.', (-2, -20): '.', (18, 15): '.', (-21, -4): '#', (19, -18): '#', (8, 9): '.', (-6, 8): '.', (16, -5): '#', (-16, -16): '.', (-1, -8): '#', (6, -2): '.', (10, 3): '.', (4, -1): '.', (1, -11): '#', (13, -1): '#', (12, 13): '.', (-3, -13): '#', (-15, -1): '#', (-15, 1): '#', (-2, -21): '#', (-12, 10): '.', (1, 10): '.', (17, 15): '#', (-4, -7): '#', (-10, 0): '.', (5, -11): '#', (-4, -1): '#', (16, 4): '.', (-6, -9): '.', (8, -10): '.', (-19, -17): '#', (-21, 3): '#', (4, 14): '.', (-18, 12): '.', (2, 1): '#', (-18, -6): '.', (-8, -19): '.', (10, -7): '#', (-1, 4): '.', (-19, 9): '#', (2, 10): '.', (-6, 19): '#', (16, -14): '.', (18, 12): '.', (-1, -7): '#', (-4, 12): '.', (-10, -10): '.', (15, 16): '#', (7, -20): '#', (-12, -4): '.', (-13, -2): '#', (-15, -9): '#', (9, -2): '.', (-12, 17): '#', (-19, 16): '#', (-16, 17): '#', (11, 16): '.', (19, -15): '#', (-4, -16): '.', (8, 10): '.', (6, 2): '.', (8, -3): '.', (6, -11): '#', (-6, -16): '.', (18, -21): '#', (18, 1): '.', (-8, -12): '.', (19, -4): '#', (-7, 7): '#', (4, -20): '.', (-17, -6): '#', (13, -7): '#', (5, -6): '.', (5, -9): '#', (-12, -5): '.', (-2, 6): '.', (15, -11): '#', (9, 10): '#', (0, -8): '.', (-18, 17): '#', (1, 4): '.', (13, -5): '#', (10, -18): '.', (-1, -3): '#', (-14, 18): '.', (-21, -2): '#', (-11, 7): '#', (6, 5): '#', (5, 16): '#', (14, -20): '.', (-8, -5): '#', (10, -1): '#', (-17, -21): '#', (-20, -2): '.', (-20, 16): '.', (-7, 8): '#', (17, -5): '#', (-19, 4): '.', (-4, 19): '#', (11, -5): '#', (3, -8): '.', (2, -12): '.', (9, 1): '#', (-5, 14): '.', (-1, 9): '#', (-2, -15): '.', (-3, 12): '#', (14, 10): '.', (14, 0): '.', (-16, 15): '#', (0, -11): '#', (13, -12): '.', (12, 14): '.', (14, -15): '.', (10, -10): '.', (-3, -3): '#', (-11, 0): '#', (8, -21): '#', (13, -18): '.', (-9, 14): '.', (5, -17): '#', (-7, -4): '.', (-15, -3): '#', (17, 14): '.', (15, -1): '#', (-7, 1): '#', (-20, -11): '.', (-20, 15): '.', (13, 15): '#', (-7, 17): '#', (17, -4): '#', (7, 1): '#', (-9, -12): '.', (-5, 7): '#', (12, -13): '#', (8, 17): '.', (-16, -4): '.', (11, 12): '.', (-3, 5): '#', (14, 11): '.', (0, -10): '.', (7, 0): '.', (6, -6): '.', (13, -19): '#', (0, -6): '.', (13, 14): '#', (1, -19): '#', (-16, -3): '#', (14, -8): '.', (3, 8): '#', (-11, 9): '#', (-3, -9): '#', (11, 6): '.', (19, 7): '#', (-2, -13): '#', (11, -12): '#', (5, 2): '#', (-9, 7): '#', (-17, -11): '#', (-17, -7): '#', (-7, -14): '.', (-20, -20): '.', (-20, 6): '.', (-17, 11): '#', (-4, -6): '.', (-8, 1): '.', (12, 1): '.', (18, -6): '.', (10, -3): '.', (-1, 0): '#', (-2, -14): '.', (-10, -19): '#', (-11, -5): '#', (-14, -18): '.', (12, -8): '.', (10, 18): '.', (13, 7): '#', (-16, -12): '.', (7, -16): '#', (5, 3): '#', (-11, 18): '.', (13, 4): '#', (17, -7): '#', (-15, 18): '.', (9, -6): '.', (2, 6): '.', (5, 11): '#', (19, -19): '#', (4, 16): '.', (7, 5): '#', (0, 7): '#', (-20, -21): '#', (16, 19): '#', (8, 12): '.', (-17, 16): '.', (6, -15): '.', (6, 8): '.', (-21, 16): '#', (-8, 8): '.', (5, -21): '#', (-19, 6): '#', (-6, 2): '.', (19, 16): '#', (3, -18): '#', (11, -17): '#', (4, -12): '.', (-17, -2): '.', (-13, -1): '#', (-13, 3): '#', (-5, 0): '.', (-16, -21): '#', (-7, -13): '#', (-15, 11): '#', (-2, -3): '#', (-12, 0): '.', (9, -21): '#', (18, -15): '.', (2, -13): '#', (-10, 10): '.', (2, 5): '#', (7, 2): '.', (-1, -1): '#', (18, 7): '.', (-12, 4): '.', (16, 10): '.', (-19, -7): '#', (13, 0): '#', (-8, 15): '.', (-18, 6): '.', (-18, -20): '.', (-21, -5): '#', (-19, 19): '#', (8, 6): '.', (-6, 13): '#', (16, -8): '.', (-3, 16): '.', (18, -1): '.', (-11, -9): '#', (-10, -8): '.', (4, -13): '.', (3, -12): '#', (1, -16): '.', (0, 18): '.', (12, 18): '.', (2, -19): '.', (15, 7): '#', (15, -14): '.', (-6, 16): '.', (-6, -5): '.', (12, -9): '.', (14, 6): '.', (-9, 18): '.', (-16, 1): '.', (4, 6): '.', (-10, 13): '.', (-2, 17): '#', (16, 1): '.', (4, -7): '#', (8, -13): '#', (19, 12): '#', (9, 12): '#', (-21, 14): '#', (-1, 11): '#', (13, -14): '#', (18, -11): '.', (18, 11): '#', (7, 6): '.', (-15, -7): '#', (-2, -16): '.', (8, -17): '#', (19, -14): '#', (8, 13): '#', (-15, 12): '#', (-1, 17): '#', (-1, 1): '#', (10, 9): '#', (-10, -13): '#', (-4, 2): '.', (10, 2): '.', (-9, -20): '.', (14, 19): '#', (-12, -15): '#', (-12, 15): '.', (-15, -14): '#', (15, -5): '#', (0, 8): '.', (-2, -17): '.', (12, -18): '.', (0, -18): '.', (1, 14): '.', (-4, -11): '#', (-10, 4): '.', (9, -20): '.', (9, -3): '#', (3, 16): '.', (-13, 19): '#', (-6, -13): '#', (-21, -11): '#', (19, 3): '#', (-21, 7): '#', (-18, 16): '.', (-3, -16): '#', (-18, -1): '#', (-8, -15): '#', (-19, 5): '#', (3, 5): '#', (16, -10): '.', (14, 13): '#', (-7, 2): '.', (-4, -2): '.', (12, 5): '.', (-18, 2): '.', (10, -15): '.', (-12, -8): '.', (-2, 3): '.', (-15, -21): '#', (11, 2): '.', (11, 9): '#', (1, 7): '#', (-13, 0): '#', (15, 8): '.', (14, -21): '#', (7, -12): '#', (5, 7): '#', (13, 8): '.', (-6, -6): '.', (9, -10): '#', (-1, -10): '#', (-5, -19): '#', (-8, -8): '.', (-21, -18): '#', (12, -14): '.', (-17, -18): '.', (16, -19): '.', (0, 3): '#', (-7, 11): '#', (6, -3): '.', (2, -1): '.', (-4, 16): '.', (-5, 13): '#', (-1, 10): '#', (0, -7): '.', (15, 18): '.', (-19, -14): '#', (11, 18): '.', (-3, 15): '#', (-16, 12): '.', (-4, 6): '.', (-13, 9): '#', (17, 12): '.', (2, 7): '.', (-5, 12): '.', (11, -19): '#', (-14, 14): '.', (-11, 3): '#', (15, -19): '#', (4, 9): '.', (-9, 13): '#', (-18, 9): '#', (-19, 7): '#', (-2, 11): '.', (17, 9): '#', (-20, -6): '.', (-20, 12): '.', (4, -9): '.', (-7, 12): '.', (-17, 1): '#', (-9, -5): '#', (-5, 2): '#', (5, 12): '.', (-2, 13): '#', (-17, 12): '#', (5, 0): '#', (-11, -11): '#', (-3, 8): '.', (-14, -8): '.', (-16, 3): '#', (-19, 12): '#', (-13, 14): '#', (-3, 14): '#', (-16, -6): '.', (-14, 9): '.', (-3, -7): '#', (-11, 12): '#', (-14, 11): '.', (3, -9): '#', (-14, -2): '.', (-5, -5): '#', (-9, 10): '#', (8, -1): '.', (-16, 13): '.', (-17, -4): '.', (7, 19): '#', (-20, -15): '.', (-20, 11): '.', (-17, 14): '.', (9, 8): '.', (-13, 8): '#', (-9, -16): '.', (7, 10): '#', (-15, 8): '.', (-17, -5): '#', (-11, -2): '#', (-3, 1): '#', (-14, -13): '#', (-10, -21): '#', (-6, -8): '.', (-13, -12): '#', (17, 19): '#', (-16, -15): '.', (-14, 0): '.', (3, 12): '#', (-12, 3): '.', (4, -6): '.', (-2, -9): '.', (2, -10): '.', (5, 14): '.', (14, 18): '.', (-1, -13): '#', (-4, -19): '.', (17, -17): '#', (-7, -10): '#', (-2, 16): '.', (-20, 2): '.', (16, 16): '.', (11, 14): '.', (11, -4): '#', (3, -3): '#', (-8, 5): '.', (17, -3): '#', (-5, 16): '.', (9, 18): '.', (-21, 17): '#', (-6, 7): '.', (-14, -11): '.', (-13, -3): '#', (1, -6): '.', (12, 9): '.', (6, -4): '.', (9, -1): '#', (10, -11): '.', (-2, -1): '.', (12, -3): '.', (5, -20): '.', (15, 12): '.', (9, 11): '#', (3, 2): '.', (-15, 5): '#', (7, -8): '#', (13, 12): '#', (9, -14): '#', (-19, -4): '#', (-8, 12): '.', (-18, 3): '.', (2, 19): '#', (-6, -19): '#', (8, 3): '.', (-6, 14): '.', (-3, 19): '#', (-5, -14): '#', (14, -2): '.', (6, -7): '.', (-4, 8): '.', (1, -13): '#', (-16, -17): '.', (-12, -17): '.', (-2, 18): '.', (-3, -12): '.', (-15, 15): '#', (-19, -10): '.', (19, 0): '#', (-12, 12): '.', (-9, 17): '#', (-17, -10): '.', (12, -15): '.', (-10, 14): '.', (5, -10): '#', (12, -1): '#', (16, 14): '.', (6, 17): '.', (8, -16): '.', (-19, -11): '#', (-21, 13): '#', (4, 13): '.', (-8, 19): '#', (-18, 10): '.', (-18, -16): '.', (10, -8): '.', (-1, 7): '#', (-19, 15): '#', (-1, -15): '#', (-6, 9): '#', (16, -4): '.', (-18, -13): '.', (4, -3): '#', (-10, -4): '.', (-4, 7): '#', (15, 17): '#', (1, -12): '.', (-7, 19): '#', (-12, -10): '.', (17, -2): '.', (-15, 0): '.', (-12, 11): '.', (-3, -18): '#', (0, -21): '#', (11, 17): '#', (1, 9): '#', (4, 2): '.', (-10, 1): '.', (16, 5): '.', (-6, -12): '.', (8, -9): '#', (6, -12): '.', (-19, -18): '.', (6, 15): '.', (-21, 2): '#', (11, -16): '.', (-18, 13): '.', (8, -6): '.', (-18, -5): '.', (-8, -18): '.', (-21, -12): '#', (-19, 8): '.', (6, -20): '.', (16, -13): '.', (-19, -21): '#', (-17, 3): '#', (-10, -9): '.', (9, 4): '#', (17, 5): '#', (13, -6): '#', (5, -5): '#', (7, 14): '#', (-12, -3): '.', (-15, -10): '#', (13, 2): '#', (-12, 18): '.', (-16, 18): '.', (18, -20): '.', (1, 2): '.', (10, -17): '#', (9, 5): '#', (-4, -15): '.', (-1, -4): '.', (18, 2): '.', (4, -2): '.', (6, 3): '.', (8, -2): '.', (-21, -3): '#', (14, -17): '.', (-10, 17): '.', (-8, -11): '.', (-19, 1): '#', (-17, -19): '#', (-4, -21): '#', (10, -13): '.', (-7, 6): '#', (-11, -12): '.', (19, -5): '#', (4, -19): '#', (11, -8): '#', (-3, 7): '#', (-5, 8): '.', (-2, 7): '#', (13, 5): '#', (-15, -17): '#', (-2, 5): '#', (-11, -17): '#', (14, 5): '.', (-16, 9): '#', (2, 14): '.', (-16, 4): '.', (-13, 4): '.', (-10, 19): '#', (-12, -11): '#', (-1, 19): '#', (-14, 19): '#', (5, 15): '#', (-11, 6): '.', (10, 11): '.', (1, 16): '.'}
    steps = 0

    # kind of bfs-like
    while not isFull(map):
        flow = []
        for coord in map.keys():
            if map[coord] == "O":
                x,y = coord
                for x2, y2 in ((x, y - 1), (x - 1, y), (x + 1, y), (x, y + 1)):
                    if (x2,y2) in map:
                        if map[(x2,y2)] == ".":
                            flow.append((x2,y2))
        # print("flow",flow)
        for f in flow:
            map[f] = "O"
        steps += 1
    print(map)
    print("steps",steps)

def runpart2():
    part2()

###########################
# run
###########################
if __name__ == '__main__':
    print("\nPART 1 RESULT")
    runpart1()

    # print("\nPART 2 RESULT")
    # runpart2()
